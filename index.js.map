{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '46111886-e1974f40af7d3aa808257f9c9';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (query, page = 1) => {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: encodeURIComponent(query),\n                page,\n                per_page: 15,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n            },\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const renderImages = (images) => {\n    const gallery = document.querySelector('.gallery');\n    const markup = images\n        .map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n            <li class=\"gallery-item\">\n                <a href=\"${largeImageURL}\" class=\"gallery-link\">\n                    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n                    <div class=\"info\">\n                        <p class=\"info-item\"><b>Likes:</b> ${likes}</p>\n                        <p class=\"info-item\"><b>Views:</b> ${views}</p>\n                        <p class=\"info-item\"><b>Comments:</b> ${comments}</p>\n                        <p class=\"info-item\"><b>Downloads:</b> ${downloads}</p>\n                    </div>\n                </a>\n            </li>\n        `)\n        .join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n};\n\nexport const showError = (message, position = 'topRight') => {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: position,\n        timeout: 2000,\n        backgroundColor: '#EF4040',\n    });\n\n\n   \n    setTimeout(() => {\n        errorMessage.classList.add('fade-out');\n        setTimeout(() => {\n            errorMessage.remove();\n        }, 500);\n    }, 3000);\n};\n\nexport const clearGallery = () => {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n};\n\nexport const showLoadMoreButton = () => {\n    const loadMoreButton = document.querySelector('#loadmore');\n    loadMoreButton.style.display = 'block';\n};\n\nexport const hideLoadMoreButton = () => {\n    const loadMoreButton = document.querySelector('#loadmore');\n    loadMoreButton.style.display = 'none';\n};\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, showError, clearGallery, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('#searchform');\nconst loadMoreButton = document.querySelector('#loadmore');\nconst loader = document.querySelector('#loader');\nconst lightbox = new SimpleLightbox('.gallery a');\n\nlet searchQuery = '';\nlet currentPage = 1;\nconst perPage = 15;\n\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    searchQuery = event.target.elements.query.value.trim();\n    currentPage = 1; // Reset to first page\n    clearGallery();\n\n    if (!searchQuery) {\n        showError('Please enter a search query', 'topRight');\n        return;\n    }\n    loader.style.display = 'block';\n    try {\n        const data = await fetchImages(searchQuery, currentPage);\n        renderImages(data.hits);\n        lightbox.refresh();\n\n        if (data.totalHits > 0) {\n            if (data.totalHits > 15) {\n                showLoadMoreButton();\n            } else {\n                hideLoadMoreButton();\n                showError(\"We're sorry, but you've reached the end of search results.\", 'bottomRight' );\n            \n            }\n        } else {\n            hideLoadMoreButton();\n            showError('No images found', 'topRight');\n        }\n    } catch (error) {\n        showError('Failed to load images. Please try again later.', 'topRight');\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    currentPage += 1;\n    loader.style.display = 'block';\n    try {\n        const data = await fetchImages(searchQuery, currentPage);\n        renderImages(data.hits);\n        lightbox.refresh();\n\n         const galleryItem = document.querySelector('.gallery-item');\n        if (galleryItem) {\n            const { height } = galleryItem.getBoundingClientRect();\n            window.scrollBy({\n                top: height * 2, // Прокрутка на дві висоти карточки\n                behavior: 'smooth' // Плавна прокрутка\n            });\n        }\n\n\n\n         // Перевірка на кінець колекції\n        if (data.hits.length < perPage || currentPage * perPage >= data.totalHits) {\n            hideLoadMoreButton();\n            showError(\"We're sorry, but you've reached the end of search results.\", 'bottomRight');\n\n        }\n    } catch (error) {\n        showError('Failed to load more images. Please try again later.', 'topRight');\n    } finally {\n        loader.style.display = 'none';\n    }\n});\n\n        \n\n  \n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","error","renderImages","images","gallery","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showError","message","position","iziToast","clearGallery","showLoadMoreButton","loadMoreButton","hideLoadMoreButton","form","loader","lightbox","SimpleLightbox","searchQuery","currentPage","perPage","event","data","galleryItem","height"],"mappings":"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"}